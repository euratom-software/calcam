<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting Up &amp; Running &mdash; Calcam  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Camera Calibration Theory" href="intro_theory.html" />
    <link rel="prev" title="General Introduction to Calcam" href="intro_general.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html">
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                Version 2.9
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro_general.html">General Introduction to Calcam</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Up &amp; Running</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installing-using-pip">Installing using pip</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installing-for-development">Installing for Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="#initial-configuration">Initial Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#updating">Updating</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="intro_theory.html">Camera Calibration Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro_conventions.html">Concepts &amp; Conventions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">GUI App User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="gui_intro.html">Introduction &amp; Launcher</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui_settings.html">Calcam Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui_calib.html">Calibration by point fitting</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui_alignment_calib.html">Calibration by manual alignment</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui_virtual_calib.html">“Virtual” Calibrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui_image_analyser.html">Image Analyser</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui_viewer.html">3D Viewer</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui_movement.html">Camera Movement Determination</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api_analysis.html">Using Calibration Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_cadmodel.html">CAD Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_rendering.html">Rendering Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_geom_matrix.html">Tomography Geometry Matrices</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_movement.html">Camera Movement Correction</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_examples.html">Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="dev_imsources.html">Image Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev_coord_formatter.html">3D Coordinate Formatters</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Calcam</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Getting Up &amp; Running</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="getting-up-running">
<h1>Getting Up &amp; Running<a class="headerlink" href="#getting-up-running" title="Permalink to this heading"></a></h1>
<p>Calcam works with Python 3.5 or newer on Windows, Linux or OSX. You can download Python installers for Windows or OSX from <a class="reference external" href="https://www.python.org/downloads/">Python.org</a> , or get it from your favourite software repository on Linux.</p>
<p>As of June 2022, suitable versions of VTK (one of Calcam’s major dependencies) are not available from the Python Package Index for Python &gt;3.9, so it currently it is much easier to install Calcam in Python 3.5 - 3.9 than anything newer (for newer versions you will have to build and install VTK and its Python bindings yourself, which can be quite involved).</p>
<p>The calcam setup script requires the <code class="docutils literal notranslate"><span class="pre">pip</span></code> and <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> packages to do the installation, and will tell you if either of these are missing (on most configurations they should be installed as standard). Documentation for how to get pip can be found <a class="reference external" href="https://pip.pypa.io/en/stable/installing/">here</a>, and you can then use <code class="docutils literal notranslate"><span class="pre">pip</span></code> to install <code class="docutils literal notranslate"><span class="pre">setuptools</span></code>.</p>
<section id="installing-using-pip">
<h2>Installing using pip<a class="headerlink" href="#installing-using-pip" title="Permalink to this heading"></a></h2>
<p>The easiest way to install Calcam is using <code class="docutils literal notranslate"><span class="pre">pip</span></code>.</p>
<section id="option-1-from-pypi">
<h3>Option 1: From PyPi<a class="headerlink" href="#option-1-from-pypi" title="Permalink to this heading"></a></h3>
<p>As of version 2.9, the current release version of Calcam is available on the Python Package Index (PyPi), so can be installed with the single command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">v</span> <span class="n">calcam</span>
</pre></div>
</div>
<p>The option <code class="docutils literal notranslate"><span class="pre">-v</span></code> is not necessary for the installation to work, but will display useful messages from the Calcam setup script which would otherwise be hidden by <code class="docutils literal notranslate"><span class="pre">pip</span></code>.</p>
</section>
<section id="option-2-from-github">
<h3>Option 2: From GitHub<a class="headerlink" href="#option-2-from-github" title="Permalink to this heading"></a></h3>
<p>If you want to get the “cutting edge” development / pre-release version of Calcam from GitHub rather than the release version, you can install this with the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">v</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">euratom</span><span class="o">-</span><span class="n">software</span><span class="o">/</span><span class="n">calcam</span><span class="o">/</span><span class="n">zipball</span><span class="o">/</span><span class="n">master</span>
</pre></div>
</div>
<p>Or if you need the version from a different <code class="docutils literal notranslate"><span class="pre">git</span></code> branch, simply replace <code class="docutils literal notranslate"><span class="pre">master</span></code> in the above URL with the name of the branch. Note that doing this with <code class="docutils literal notranslate"><span class="pre">release</span></code> should have the same results as installing from PyPi, as described above.</p>
</section>
<section id="option-3-from-manually-downloaded-source">
<h3>Option 3: From manually downloaded source<a class="headerlink" href="#option-3-from-manually-downloaded-source" title="Permalink to this heading"></a></h3>
<p>If you prefer to download the calcam source code manually, the latest release version can be downloaded from the <a class="reference external" href="https://github.com/euratom-software/calcam/releases">Releases page on GitHub</a>.</p>
<p>Alternatively, the “cutting edge” live development version (which is not guaranteed to be in a fully working state at all times) can be downloaded using the green <span class="guilabel">Code</span> button on the <a class="reference external" href="https://github.com/euratom-software/calcam">GitHub repository page</a>.</p>
<p>If you prefer to use Git, which is recommended if you want to do any development on Calcam, the source can be cloned from the GitHub reporepository with the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="o">-</span><span class="n">b</span> <span class="n">release</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">euratom</span><span class="o">-</span><span class="n">software</span><span class="o">/</span><span class="n">calcam</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>for the latest release version, or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">euratom</span><span class="o">-</span><span class="n">software</span><span class="o">/</span><span class="n">calcam</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>for the development version (which may contain some bugs or incomplete features at any given time).</p>
<p>Once you have a copy of the source files on your computer, navigate to the directory where Calcam has been unzipped or cloned and open a terminal / command prompt. To install Calcam, use the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">v</span> <span class="o">.</span>
</pre></div>
</div>
<p>Once the setup is complete, you can delete the downloaded source code.</p>
</section>
</section>
<section id="installing-for-development">
<h2>Installing for Development<a class="headerlink" href="#installing-for-development" title="Permalink to this heading"></a></h2>
<p>If you plan to make any modifications to /  do any development work on Calcam, and want to be able to edit the Calcam source code without having to run the setup script again to have your changes take effect, you can install Calcam in development / eidtable mode.</p>
<section id="option-1-using-git">
<h3>Option 1: Using Git<a class="headerlink" href="#option-1-using-git" title="Permalink to this heading"></a></h3>
<p>If you want to clone the project directly from GuitHub and install in editable mode, this can be done with the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">e</span> <span class="n">git</span><span class="o">+</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">euratom</span><span class="o">-</span><span class="n">software</span><span class="o">/</span><span class="n">calcam</span><span class="o">.</span><span class="n">git</span><span class="nd">@master</span><span class="c1">#egg=calcam</span>
</pre></div>
</div>
<p>This will clone the calcam git repository and install in editable mode, so you can make changes to the downloaded code which will take effect without reinstalling.</p>
</section>
<section id="option-2-from-manually-downloaded-source">
<h3>Option 2: From manually downloaded source<a class="headerlink" href="#option-2-from-manually-downloaded-source" title="Permalink to this heading"></a></h3>
<p>If you prefer to download the calcam source manually, you can get the source as described in the above section, and modify the <code class="docutils literal notranslate"><span class="pre">pip</span></code> installation command to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span>
</pre></div>
</div>
<p>The source you downloaded then remains the “live” copy and changes you make will take effect without re-installing.</p>
</section>
</section>
<section id="initial-configuration">
<h2>Initial Configuration<a class="headerlink" href="#initial-configuration" title="Permalink to this heading"></a></h2>
<p>For convenience, it is suggested to make a shortcut to the calcam GUI executable, the path of which is given in the message at the end of setup.</p>
<section id="setting-up-cad-model-definitions">
<h3>Setting up CAD Model Definitions<a class="headerlink" href="#setting-up-cad-model-definitions" title="Permalink to this heading"></a></h3>
<p>Camera calibration in Calcam is based on matching features between camera images and a CAD model of the scene viewed by the camera. As such, it is necessary to define one or more CAD models for use in calcam. The current version supports importing <code class="docutils literal notranslate"><span class="pre">.stl</span></code> or <code class="docutils literal notranslate"><span class="pre">.obj</span></code> format 3D mesh files. It’s usually convenient to split the model in to several individual mesh files containing different parts of the scene, and these can then be turned on or off individually when working with the model. Calcam packages these mesh files in to a custom zipped file format (.ccm) along with various metadata to create a Calcam CAD model file. You can have several such files and easily switch between them at any time. It is recommended to read the <a class="reference internal" href="intro_conventions.html#cadmodel-intro"><span class="std std-ref">CAD Models</span></a> section in concepts and conventions, then consult the user guide for the <a class="reference internal" href="gui_settings.html"><span class="doc">Calcam Settings</span></a> interface for details of how to set up CAD model definitions.</p>
</section>
<section id="setting-up-custom-image-sources-optional">
<h3>Setting up custom image sources (optional)<a class="headerlink" href="#setting-up-custom-image-sources-optional" title="Permalink to this heading"></a></h3>
<p>As standard, Calcam can load camera images from most common image file formats. If desired, you can set up additional custom “image sources”, which are user-defined Python modules for loading camera images in to Calcam. For example you may want to load camera data directly from a central data server, or read images from an unusual file format. This can be done by writing a small python module which plugs in to calcam and handles the image loading. A full guide to writing such modules can be found in the <a class="reference internal" href="dev_imsources.html"><span class="doc">Image Sources</span></a> developer documentation page. Once written, they can be added to Calcam with the <a class="reference internal" href="gui_settings.html"><span class="doc">Calcam Settings</span></a> interface.</p>
</section>
<section id="file-type-associations-optional">
<h3>File type associations (optional)<a class="headerlink" href="#file-type-associations-optional" title="Permalink to this heading"></a></h3>
<p>Since version 2.6, it is possible to open .ccc files directly with the Calcam GUI executable / launch script to make opening calibrations more convenient. To take advantage of this, follow your operating system’s normal procedure to associate the Calcam executable with opening .ccc files. The location of the calcam executable is given at the end of the installation process (see above).</p>
</section>
<section id="system-wide-default-configuration">
<h3>System-wide default configuration<a class="headerlink" href="#system-wide-default-configuration" title="Permalink to this heading"></a></h3>
<p>If installing Calcam on a multi-user system, it may be desirable to provide a default configuration (CAD model file locations, image sources) for users running Calcam for the first time on that system. Since version 2.9, Calcam supports this by placing a suitable default configuration file in the Calcam installation directory.</p>
<p>The default configuration file is a json file with the same format as Calcam’s normal user configuration file. Therefore the easiest way to set up a default configuration file is to configure Calcam how you want it on your own user account, then copy the configuration file <code class="docutils literal notranslate"><span class="pre">~/.calcam_config</span></code> (where <code class="docutils literal notranslate"><span class="pre">~</span></code> is your home directory e.g. <code class="docutils literal notranslate"><span class="pre">/home/username</span></code> on Unix or <code class="docutils literal notranslate"><span class="pre">C:\Users\username</span></code> on windows) to the relevant location.</p>
<p>The place Calcam will look for the default configuration file - where you need to place it to be effective - can be checked with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">calcam</span>
<span class="nb">print</span><span class="p">(</span><span class="n">calcam</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">default_cfg_path</span><span class="p">)</span>
</pre></div>
</div>
<p>In a default calcam installation this file will not exist; if you place a configuration file of your choice there, it will be picked up as the default for new users who do not yet have their own user-specific conifguration file.</p>
</section>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this heading"></a></h2>
<p>If you use the <code class="docutils literal notranslate"><span class="pre">-v</span></code> option with <code class="docutils literal notranslate"><span class="pre">pip</span></code>, the calcam setup should finish with a message like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">***************************************************************</span>

<span class="n">Calcam</span> <span class="n">installation</span> <span class="n">complete</span><span class="o">.</span>

<span class="n">It</span> <span class="n">can</span> <span class="n">be</span> <span class="n">imported</span> <span class="k">as</span> <span class="n">a</span> <span class="n">Python</span> <span class="n">module</span> <span class="k">with</span> <span class="s2">&quot;import calcam&quot;</span>

<span class="n">The</span> <span class="n">GUI</span> <span class="n">can</span> <span class="n">be</span> <span class="n">launched</span> <span class="n">using</span> <span class="n">the</span> <span class="n">executable</span><span class="p">:</span>
<span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">username</span>\<span class="n">AppData</span>\<span class="n">Roaming</span>\<span class="n">Python</span>\<span class="n">Python37</span>\<span class="n">Scripts</span>\<span class="n">calcam</span><span class="o">.</span><span class="n">exe</span>

<span class="o">***************************************************************</span>
</pre></div>
</div>
<p>You should then be able to import the calcam module and start the GUI. If not, the following sections provide some guidance on fixing common problems.</p>
<section id="insufficient-persmissions-to-install">
<h3>Insufficient Persmissions to install<a class="headerlink" href="#insufficient-persmissions-to-install" title="Permalink to this heading"></a></h3>
<p>The setup process may try to install Calcam in the python library paths for your system. If your user account does not have permissions to write to these paths (e.g. root or admin permissions), the setup script will fail with an error about permissions. <strong>In this case, adding the ``–user`` option to the installation command will install the package for your user account only, which does not require root or admin permissions.</strong></p>
</section>
<section id="problems-trying-to-start-calcam">
<h3>Problems trying to start Calcam<a class="headerlink" href="#problems-trying-to-start-calcam" title="Permalink to this heading"></a></h3>
<p>If you cannot import or start Calcam after installation, the most common problems are due to one or more of Calcam’s dependencies not working properly. In most cases, Calcam should give an error message which makes it clear which dependency is not working properly. If this is not clear, open a python prompt and try the following import commands, which all need to work for Calcam to be able to work:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">vtk</span> <span class="kn">import</span> <span class="n">vtkVersion</span>
<span class="kn">from</span> <span class="nn">cv2</span> <span class="kn">import</span> <span class="n">__version__</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">__version__</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span>
</pre></div>
</div>
<p>In addition to these, at least one of the following PyQt imports must work for the Calcam GUI to be available ( it doesn’t matter which - as long as one works Calcam will be able to use it):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyQt6</span> <span class="kn">import</span> <span class="n">QtCore</span>
<span class="kn">from</span> <span class="nn">PyQt5</span> <span class="kn">import</span> <span class="n">QtCore</span>
<span class="kn">from</span> <span class="nn">PyQt4</span> <span class="kn">import</span> <span class="n">QtCore</span>
</pre></div>
</div>
<p>If any of the required imports fail with errors, you will need to fix the relevant Python module installation before Calcam will work (re-installing the relevant module is a good first thing to try). If all of the required imports work properly, there could be a bug or issue with Calcam.</p>
<p>If troubleshooting dependencies or strange / broken behaviour of Calcam, the table below gives some information on known issues with some versions of Calcam’s dependencies:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Module / Library</p></th>
<th class="head"><p>Versions Tested / comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>SciPy</p></td>
<td><p>Up to 1.5.2</p></td>
</tr>
<tr class="row-odd"><td><p>NumPy</p></td>
<td><p>Up to 1.19.1</p></td>
</tr>
<tr class="row-even"><td><p>MatPlotLib</p></td>
<td><p>Up to 3.3.0</p></td>
</tr>
<tr class="row-odd"><td><p>OpenCV (a.k.a. cv2)</p></td>
<td><p>Tested up to to 4.6</p>
<p>Fisheye camera model only available if using 3.x or newer.</p>
<p>If running under OSX older than 10.12, versions of OpenCV newer than 3.2 may cause crashes on import (downgrade to OpenCV &lt; 3.3 to fix this).</p>
</td>
</tr>
<tr class="row-even"><td><p>VTK</p></td>
<td><p>Requires &gt;6, OK with versions &lt; 9.1. With VTK 9.1+, setting CAD models to wireframe can cause Python to exit unexpectedly (see GitHub issue #78)</p></td>
</tr>
<tr class="row-odd"><td><p>PyQt</p></td>
<td><p>Works with PyQt4, PyQt5 or PyQt6 (tested up to 6.2.2)</p>
<p>PyQt5 versions 5.11 and older are known to cause unreadable text in the GUI on OSX when using dark theme.</p>
<p>Some versions can result in click positions being registsred wrong on OSX using High DPI mode; not clear what version ranges this affects (see GitHub issue #79)</p>
</td>
</tr>
</tbody>
</table>
<p>You can check which versions OpenCV, VTK and PyQt you are using in the <a class="reference internal" href="gui_settings.html"><span class="doc">Calcam Settings</span></a> interface.</p>
</section>
<section id="opengl-related-error-messages">
<h3>OpenGL related error messages<a class="headerlink" href="#opengl-related-error-messages" title="Permalink to this heading"></a></h3>
<p>If the Calcam GUI fails to start with a message about OpenGL environment etc, either there is a problem with your installation of VTK, or the graphics setup of your system. Sometimes this can be a result of using Calcam on a remote system using some remote connection software. If you have a different way to connect to the computer running Calcam, try that - if the results don’t change, see the section below on graphics problems.</p>
</section>
<section id="black-screen-corrupted-graphics">
<h3>Black screen / corrupted graphics<a class="headerlink" href="#black-screen-corrupted-graphics" title="Permalink to this heading"></a></h3>
<p>If you get blank / black displays in Calcam where the CAD model and image are supposed to be displayed, or get a corrupted view of the CAD model, this is an issue with VTK (the OpenGL visualisation library which Calcam uses to display the CAD and some images). To confirm if your VTK installation is working, you can try running the VTK example code on <a class="reference external" href="https://kitware.github.io/vtk-examples/site/Python/GeometricObjects/CylinderExample/">this page</a> to check if it gives a result like the picture. If you do have a problem with VTK, the easiest thing to try is installing a different version. You can check the current version of VTK in the calcam <a class="reference internal" href="gui_settings.html"><span class="doc">Calcam Settings</span></a> interface. For example, if you have VTK 9.0.3 installed but are getting non-working graphics, you can try installing VTK 8 instead with the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="s2">&quot;vtk&lt;9&quot;</span>
</pre></div>
</div>
<p>If you cannot get VTK working properly, you may need to try using Calcam on a different computer with a different hardware / software environment.</p>
</section>
<section id="reporting-problems">
<h3>Reporting Problems<a class="headerlink" href="#reporting-problems" title="Permalink to this heading"></a></h3>
<p>If you find bugs / problems, please check the <a class="reference external" href="https://github.com/euratom-software/calcam/issues">GitHub issues page</a> and report the problem there if it isn’t already listed.</p>
</section>
</section>
<section id="updating">
<h2>Updating<a class="headerlink" href="#updating" title="Permalink to this heading"></a></h2>
<section id="version-cross-compatibility">
<h3>Version Cross-Compatibility<a class="headerlink" href="#version-cross-compatibility" title="Permalink to this heading"></a></h3>
<p>Calcam uses something close to semanic versioning, to try to make it clear for users to decide when to update. The version number consists of 3 numbers separated by points, in the format <code class="docutils literal notranslate"><span class="pre">Major.Minor.Patch</span></code>:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">patch</span></code> version is incremented for bug fixes which do not change the functionality.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">minor</span></code> version is incremented when adding new functionality in a backwards-compatible way. Upgrading to a newer minor version of calcam should therefore not break any code which calls calcam as a dependency.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">major</span></code> version number is incremented if incompatible (i.e. non backwards-compatible) changes to the public API or storage file formats are made. The public API is defined as anything covered by the <cite>API User Guide</cite> section of this documentation.</p></li>
</ul>
<p>Therefore if you are using Calcam integrated in to some analysis toolchain, it should be safe to upgrade to a newer <code class="docutils literal notranslate"><span class="pre">minor</span></code> version but not to a newer major version.</p>
<section id="file-compatibility">
<h4>File Compatibility<a class="headerlink" href="#file-compatibility" title="Permalink to this heading"></a></h4>
<p>Newer <code class="docutils literal notranslate"><span class="pre">minor</span></code> versions of Calcam will maintain backwards compatibility with files created by earlier versions, but forward compatibility is not guaranteed i.e. files created with newer versions of Calcam may not work properly with older versions.</p>
<blockquote>
<div><ul class="simple">
<li><p>Calibration files created with Calcam 2.9 or newer which make use of the image masking feature will cause errors if used with Calcam versions &lt; 2.9</p></li>
<li><p>Calibration files created with Calcam 2.6 or newer cannot be loaded properly in Calcam versions &lt; 2.6</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="updating-using-pip">
<h3>Updating using pip<a class="headerlink" href="#updating-using-pip" title="Permalink to this heading"></a></h3>
<p>To update to the latest release version of calcam using <code class="docutils literal notranslate"><span class="pre">pip</span></code>, use the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">calcam</span>
</pre></div>
</div>
</section>
<section id="from-source">
<h3>From source<a class="headerlink" href="#from-source" title="Permalink to this heading"></a></h3>
<p>To upgrade from manually downloaded source, follow the instructions to install from source on this page, with the version of the code you want to use.</p>
<blockquote>
<div><p>If installing older versions of Calcam &lt; 2.9, installing with pip may not take care of Calcam’s dependencies properly. For these older versions, refer to the offline version of this documentation in the <code class="docutils literal notranslate"><span class="pre">docs/</span></code> folder of the particular code version.</p>
</div></blockquote>
</section>
<section id="updating-from-calcam-1-x">
<h3>Updating from Calcam 1.x<a class="headerlink" href="#updating-from-calcam-1-x" title="Permalink to this heading"></a></h3>
<p>The update from Calcam 1.x to Calcam 2 includes large overhauls to the file formats, file storage conventions and Python API. This section covers the main things users need to know when upgrading from Calcam 1.x to Calcam 2.</p>
</section>
<section id="file-storage">
<h3>File Storage<a class="headerlink" href="#file-storage" title="Permalink to this heading"></a></h3>
<p>In Calcam 1, CAD model definitions, other user-defined code, calibration input and results files were stored in a pre-prescribed directory structure. In Calcam 2 this is no longer the case; these files can be stored wherever you want and are opened either by graphical file browsing in the Calcam GUI or by file path in the Calcam API. The main change required to code calling Calcam to accommodate this will be that calibration results will now need to be loaded by supplying the relative or full path to the results file, rather than just the identifying name as before.</p>
</section>
<section id="file-formats">
<h3>File Formats<a class="headerlink" href="#file-formats" title="Permalink to this heading"></a></h3>
<p>Whereas in Calcam 1, imported images, point pairs, calibration and fit results were all stored in separate files, in Calcam 2 all of these elements are stored together as a calibration. This is to maintain better traceability of calcam calibrations and make it easier for users to share data. Except for <code class="docutils literal notranslate"><span class="pre">.csv</span></code> point pair files, Calcam 2 is not backwards compatible with Calcam 1 files, therefore to use existing data from Calcam 1 you must convert your Calcam 1 data to the new Calcam 2 formats. This can be done in bulk using the file converter utility provided in the <code class="docutils literal notranslate"><span class="pre">calcam1_file_converter</span></code> directory of the calcam 2 repo. Running <code class="docutils literal notranslate"><span class="pre">convert_files.py</span></code> from this directory as a script will open the tool, which is shown below:</p>
<img alt="Calcam 1.x file converter screenshot" src="_images/file_converter.png" />
<p>At the top of this window, the “Source Directory”, where the tool will look for Calcam 1.x files to convert, is displayed. This is typically detected automatically, but you can also manually set the source directory manually using the <span class="guilabel">Browse…</span> button (this should be the complete Calcam 1.x data directory, i.e. the location of the <code class="docutils literal notranslate"><span class="pre">FitResults</span></code>, <code class="docutils literal notranslate"><span class="pre">Images</span></code>, <code class="docutils literal notranslate"><span class="pre">PointPairs</span></code> etc directories).</p>
<p>Below this are 2 main sections: the top section for converting existing calibrations, and the bottom section for converting existing CAD model definitions. When the <span class="guilabel">Convert!</span> button is clicked in the relevant section, the large status bar at the bottom of the window will show the current progress during the conversion. The three text boxes containing file paths are used to specify where the output Calcam 2 calibration files should be saved to, since in Calcam 2 this can be wherever you want.</p>
<p>When converting calibrations, if the <span class="guilabel">Try to match with image files based on name</span> checkbox is ticked, the tool will try to match up calibration results with images by looking for Calcam image save files whose name also appears in the name of the calibration result being converted. If such an image is found, the image will be added to the resulting Calcam 2 save file. To disable this auto-matching, un-tick this checkbox, and Calcam 2 calibration results converted from Calcam 1 files will simply not contain any images.</p>
<p><strong>Note:</strong> the conversion process does not alter or remove any of the original Calcam 1 data, so if anything goes wrong and you have to, or want to, go back to using Calcam 1.x, the data will still be intact, and it is left to the user to remove the old Calcam 1 data when you feel sufficiently comfortable to do so.</p>
</section>
<section id="api-changes-summary">
<h3>API Changes Summary<a class="headerlink" href="#api-changes-summary" title="Permalink to this heading"></a></h3>
<p>The change from Calcam 1 to Calcam 2 includes several compatibility breaking API changes. The main changes to the API are:</p>
<ul class="simple">
<li><p>The old <code class="xref py py-class docutils literal notranslate"><span class="pre">calcam.CalibResults</span></code> class has been superceded by the new <a class="reference internal" href="api_analysis.html#calcam.Calibration" title="calcam.Calibration"><code class="xref py py-class docutils literal notranslate"><span class="pre">calcam.Calibration</span></code></a> class. This maintains the methods for working with calibration results which existed in <code class="xref py py-class docutils literal notranslate"><span class="pre">calcam.CalibResults</span></code>, with the addition that <a class="reference internal" href="api_analysis.html#calcam.Calibration" title="calcam.Calibration"><code class="xref py py-class docutils literal notranslate"><span class="pre">calcam.Calibration</span></code></a> now contains data on the entire calibration process: image, point pairs, fit results and metadata.</p></li>
<li><p>The old <code class="xref py py-class docutils literal notranslate"><span class="pre">calcam.VirtualCalib</span></code> class has been removed: virtual calibration results are now represented by the new <a class="reference internal" href="api_analysis.html#calcam.Calibration" title="calcam.Calibration"><code class="xref py py-class docutils literal notranslate"><span class="pre">calcam.Calibration</span></code></a> class, meaning all types of calibration use the same class in Calcam 2.</p></li>
<li><p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">RayCaster</span></code> class has been removed. This is because although more functionality was originally envisaged for this class, that additional functionality is no longer planned for Calcam and therefore only a single method of this class was ever useful. In addition, the important element of this class’ state was already being held by other objects. The functionality of the <code class="xref py py-class docutils literal notranslate"><span class="pre">RayCaster</span></code> class has been moved to the function <a class="reference internal" href="api_analysis.html#calcam.raycast_sightlines" title="calcam.raycast_sightlines"><code class="xref py py-func docutils literal notranslate"><span class="pre">calcam.raycast_sightlines()</span></code></a></p></li>
<li><p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">machine_geometry</span></code> module has been removed. Now instead of every CAD modeling having its own class inside calcam.machine_geometry, the <a class="reference internal" href="api_cadmodel.html#calcam.CADModel" title="calcam.CADModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">calcam.CADModel</span></code></a> class is used for all CAD models and is instanciated with string arguments to specify the name of the model you want. Also there have been various changes to method names and call signatures in the CAD model class.</p></li>
<li><p>Naming conventions: to be more Pythonic, throughout the API argument or function names which previously used capital letters and <code class="docutils literal notranslate"><span class="pre">PascalCase</span></code> or <code class="docutils literal notranslate"><span class="pre">camelCase</span></code> have been changed to <code class="docutils literal notranslate"><span class="pre">lowercase_with_underscores</span></code>, while class names keep <code class="docutils literal notranslate"><span class="pre">PascalCase</span></code>.</p></li>
</ul>
<p>For more information, see the API documentation in <a class="reference internal" href="api_analysis.html"><span class="doc">Using Calibration Results</span></a> and the <a class="reference internal" href="api_examples.html"><span class="doc">Examples</span></a> .</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="intro_general.html" class="btn btn-neutral float-left" title="General Introduction to Calcam" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="intro_theory.html" class="btn btn-neutral float-right" title="Camera Calibration Theory" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015-2022, European Atomic Energy Community (EURATOM).</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>